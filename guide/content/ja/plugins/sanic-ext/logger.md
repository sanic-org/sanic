---
title: Sanic Extensions - バックグラウンドロガー
---

# バックグラウンドログ

バックグラウンドロガーには `sanic>=22.9` と `sanic-ext>=22.9` が必要です。

Sanic Extensionsを設定すると、バックグラウンドプロセスからすべてのメッセージをログに記録できます。 format@@0(../../guide/deployment/manager.md#single-process-mode) ではないことが必要です。

ロギングは高価な操作になることがあります。 すべてのログをバックグラウンドプロセスにプッシュすることで、パフォーマンスのメリットが得られる可能性があります。

## セットアップ

.. 列::

```
バックグラウンドロガーが無効になっています。使用する場合はオプトインする必要があります。
```

.. 列::

````
```python
app.config.LOGGING = True
```
````

## どのように機能します

有効にすると、拡張機能は `multoprocessing.Queue` を作成します。 format@@0(../../guide/best-practices/logging.md) 上のすべてのハンドラを削除し、[`QueueHandler`](https://docs.python.org/3/library/logging.handlers.html#queuehandler) に置き換えます。 メッセージがログされると、ハンドラによってキューにプッシュされます。 バックグラウンドプロセスで元々あったログハンドラを読み取ることができます つまり、通常どおりにロギングを設定することができ、「ただ動作する」ことができます。

## 設定

| キー                                                            | タイプ    | デフォルト   | 説明                      |
| ------------------------------------------------------------- | ------ | ------- | ----------------------- |
| ログイン                                                          | `bool` | `False` | この拡張機能を有効にするかどうか。       |
| LOGGING_QUEUE_最大サイズ | `int`  | `4096`  | メッセージが拒否される前のキューの最大サイズ。 |
