---
title: ç¬¬23.12ç‰ˆ
---

# ç¬¬23.12ç‰ˆ (LTS)

.. toc::

## ä¸€. å¯¼è¨€

è¿™æ˜¯ç¬¬23ç‰ˆçš„æœ€åç‰ˆæœ¬[å‘è¡Œå‘¨æœŸ](../../organization/policies.md#release-schedule)ã€‚ å®ƒè¢«æŒ‡å®šä¸º**é•¿æœŸæ”¯æŒ("LTS") release**, è¿™æ„å‘³ç€å®ƒå°†æŒ‰ç…§æ”¯æŒæ”¿ç­–çš„è§„å®šå¾—åˆ°ä¸¤å¹´çš„æ”¯æŒã€‚ å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ [GitHub](https://github.com/sanic-org/sanic/issues/new/seloe.)

## äº†è§£ä»€ä¹ˆ

æ›´å¤šè¯¦ç»†ä¿¡æ¯åœ¨ [Changelog](../changelog.html)ã€‚ æ˜¾è‘—çš„æ–°åŠŸèƒ½æˆ–ç ´æŸåŠŸèƒ½ä»¥åŠå‡çº§å†…å®¹ï¼š

### :party_poper: æ–‡æ¡£ç°åœ¨ä½¿ç”¨ {span:has-text-primary:Sanic}

![](http://127.0.0.1:8000/assets/images/sanic-framework-logo-circle-128x128.png)

æ‚¨å¯ä»¥é˜…è¯»[æ‰€æœ‰å…³äºå¦‚ä½•](/en/build-with-sanic.html)ï¼Œä½†æˆ‘ä»¬å°†æ­¤æ–‡æ¡£ç½‘ç«™è½¬æ¢ä¸ºä½¿ç”¨ SHH ğŸ¤« stackã€‚

- [Sanic](https://sanic.dev)
- [html5tagger](https://github.com/sanic-org/html5tagger)
- [HTMX](https://htmx.org/)

### ğŸ‘¶ _BETA_ æ¬¢è¿ä½¿ç”¨ Sanic äº¤äº’å¼æ§åˆ¶å°

è¿™æ˜¯æ­£ç¡®çš„ï¼Œç°åœ¨è¨å°¼å…‹å¸¦ç€REPLï¼

![](/assets/images/repli.png)

å½“ä½¿ç”¨ Sanic CLI æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ "--repli" å‚æ•°æ¥è‡ªåŠ¨è¿è¡Œä¸€ä¸ªäº¤äº’å¼æ§åˆ¶å°ã€‚ è¿™åœ¨å¼€å‘æ—¶éå¸¸æœ‰ç”¨ï¼Œå…è®¸æ‚¨è®¿é—®åº”ç”¨ç¨‹åºå®ä¾‹ã€‚ è¿˜æœ‰ä¸€ä¸ªå†…ç½®å®¢æˆ·ç«¯å·²å¯ç”¨ï¼Œå¯ä»¥å°† HTTP è¯·æ±‚å‘é€åˆ°è¿è¡Œå®ä¾‹ã€‚

å¦‚æœæ‚¨ä½¿ç”¨ "--dev" æ ‡å¿—ï¼Œæ­¤åŠŸèƒ½é»˜è®¤æ˜¯å‡†å¯ç”¨çš„ã€‚ å®ƒå°†ä¸ä¼šå½»åº•è¿è¡ŒREPLï¼Œ å®ƒå°†å¯åŠ¨è¿›ç¨‹ï¼Œå¹¶å…è®¸æ‚¨éšæ—¶åœ¨é”®ç›˜ä¸Šç‚¹å‡»\`<ENTER>'ã€‚

_è¿™ä»ç„¶å¤„äºBETAæ¨¡å¼ã€‚ æˆ‘ä»¬å¸Œæœ›ä½ è®©æˆ‘ä»¬äº†è§£ä»»ä½•å‡çº§è¯·æ±‚æˆ–é—®é¢˜ã€‚_

### Python 3.12 æ”¯æŒ

æˆ‘ä»¬å·²ç»å°† Python 3.12 æ·»åŠ åˆ°æ”¯æŒçš„ç‰ˆæœ¬ã€‚

### å¯åŠ¨å¹¶é‡å¯ä»»æ„è¿›ç¨‹

ä½¿ç”¨ [multiplexer](../../guide/running/manager.md#access-to-the-multiplexer)ï¼Œæ‚¨ç°åœ¨å¯ä»¥å¼€å§‹å¹¶é‡å¯ä»»æ„æˆ–åŸæœ‰çš„è¿‡ç¨‹ã€‚ è¿™ä½¿å¾—å¤šè·¯ç¨‹åºå’Œå·¥äººç®¡ç†å‘˜çš„è¿ä½œæ–¹å¼å…·æœ‰ä»¥ä¸‹æ–°åŠŸèƒ½ï¼š

1. `multiplexer.restt("<process name>")` ç°åœ¨å°†é‡æ–°å¯åŠ¨ä¸€ä¸ªç›®æ ‡çš„å•ä¸€è¿›ç¨‹
2. `multiplexer.manag(...)` æ˜¯ä¸€ç§å®Œå…¨ç±»ä¼¼äº`manager.management(...)` çš„æ–°æ–¹æ³•
3. `manag` æ–¹æ³•ç°åœ¨æœ‰é¢å¤–çš„å…³é”®å­—å‚æ•°ï¼š
   - `tracked` - è¿›ç¨‹å®Œæˆåæ˜¯å¦è·Ÿè¸ªè¿›ç¨‹çŠ¶æ€
   - `restable` - æ˜¯å¦å…è®¸é‡å¯è¿›ç¨‹
   - `auto_start` - æ˜¯å¦åœ¨åˆ›å»ºåç«‹å³å¯åŠ¨æ­¤è¿›ç¨‹

```python
def task(n: int = 10, **kwargs):
    print("TASK STARTED", kwargs)
    for i in range(n):
        print(f"Running task - Step {i+1} of {n}")
        sleep(1)

@app.get("/restart")
async def restart_handler(request: Request):
    request.app.m.restart("Sanic-TEST-0")
    return json({"foo": request.app.m.name})


@app.get("/start")
async def start_handler(request: Request):
    request.app.m.manage("NEW", task, kwargs={"n": 7}, workers=2)
    return json({"foo": request.app.m.name})

@app.main_process_ready
def start_process(app: Sanic):
    app.manager.manage("TEST", task, kwargs={"n": 3}, restartable=True)
```

### å·²æ’åºçš„å¬ä¼—å’Œä¿¡å·

åœ¨ [v22.9](../2022/v22.9.md) ä¸­ï¼ŒSanic å¢åŠ äº†ä¸­é—´ä»¶çš„ä¼˜å…ˆé¡ºåºï¼Œä»¥å…è®¸ä»»æ„æ’åºä¸­é—´ä»¶ã€‚ è¿™ä¸€æ¦‚å¿µç°å·²æ‰©å¤§åˆ°å¬ä¼—å’Œä¿¡å·ã€‚ è¿™å°†å…è®¸åœ¨åˆ›å»ºæ—¶æŒ‡å®šä¸€ä¸ªä¼˜å…ˆçº§ç¼–å·ï¼Œè¿™å°†è¦†ç›–å…¶åœ¨æ‰§è¡Œæ—¶é—´æ®µä¸­çš„é»˜è®¤ä½ç½®ã€‚

```python
@app.before_server_start(priority=3)
å¼‚æ­¥é‡‡æ ·(app):
...
```

æ•°å­—è¶Šé«˜ï¼Œå®ƒå°†è·å¾—è¶Šé«˜çš„ä¼˜å…ˆçº§ã€‚ æ€»ä½“ä¸Šï¼Œå†³å®šæ‰§è¡Œé¡ºåºçš„è§„åˆ™å¦‚ä¸‹ï¼š

1. æŒ‰é™åºæ’åº
2. è“å›¾ç›‘å¬å™¨ä¹‹å‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨
3. æ³¨å†Œè®¢å•

_è®°ä½ï¼Œä¸€äº›ç›‘å¬å™¨è¢«åå‘æ‰§è¡Œ_

### Websocket ä¿¡å·

æˆ‘ä»¬ä¸ºwebsocketæ·»åŠ äº†ä¸‰ä¸ªæ–°ä¿¡å·ï¼š

1. `websocket.handler.before`
2. `websocket.handler.after `
3. `websocket.handler.exception`

```python
@app.signal("websocket.handler.before")
async def ws_before(request: Request, websocket: Websocket):


@app.signal("websocket.handler.after ")
async def ws_after (request: Request, websocket: Websocket):
    .
    
@app.signal("websocket.handler. xception")
async def ws_exception(
    request: Request, websocket: Websocket, exception: Exception
):
...
```

![](https://camo.githubusercontent.com/ea2894c88bedf37a4f12f1296569e8fd14bfceaa36d4452c7b7a1869d2f1cdb18/687477733a2f2f7a692f77732d73696e616c732e706e67)

### ç®€åŒ–ä¿¡å·

â€œSanicâ€æ€»æ˜¯å¼ºåˆ¶æ‰§è¡Œä¸‰éƒ¨åˆ†å‘½åæ ‡è®°åè®®ï¼š`one e.tw.three`ã€‚ ç„¶è€Œï¼Œç°åœ¨ä½ å¯ä»¥åˆ›å»ºæ›´ç®€å•çš„åå­—ï¼Œè¿™åªæ˜¯ä¸€ä¸ªéƒ¨ä»¶ã€‚

```python
@app.signal("foo")
async def foo():
    ...
```

ä½ å¯ä»¥è®©è¿™ä¸ªéƒ¨ä»¶ä¸æ­£å¸¸ä¿¡å·å’Œè·¯ç”±ä¸€æ ·åŠ¨æ€ï¼š

```python
@app.signal("<thing>")
async def å¤„ç†å™¨(**kwargs):
    print("æ”¶åˆ°foobar ä¿¡å·")
    print(kwargs)


@app. oute("/")
å¼‚æ­¥æµ‹è¯•(è¯·æ±‚: è¯·æ±‚):
    ç­‰å¾…request.appailch("foobar")
    return json({"hello": "world"})
```

å¦‚æœæ‚¨éœ€è¦æœ‰å¤šä¸ªåŠ¨æ€ä¿¡å·ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ä½¿ç”¨è¾ƒé•¿çš„ä¸‰éƒ¨åˆ†æ ¼å¼ã€‚

### `event` æ–¹æ³•å·²è¢«æ›´æ–°

å¯¹ `app.event()` å’Œ `bluprint.event()`éƒ½åšäº†ä¸€äº›ä¿®æ”¹ã€‚

- `condition` å’Œ `exclusive` æ˜¯æ§åˆ¶åŒ¹é…æ¡ä»¶çš„å…³é”®å­— (ç±»ä¼¼äºâ€œsignal()\` æ–¹æ³•)
- æ‚¨å¯ä»¥é€šè¿‡ `str` æˆ– `Enum` (å°±åƒ`signal()`)
- è¿”å›ä¼ é€’åˆ°è°ƒåº¦()æ–¹æ³•çš„ä¸Šä¸‹æ–‡å‰¯æœ¬

### é‡æ–°åŠ è½½è§¦å‘å™¨æ–‡ä»¶å·²æ›´æ”¹

ç”±è¯»å–å™¨æ›´æ”¹çš„æ–‡ä»¶ç°åœ¨è¢«æ³¨å…¥åˆ°ä¾¦å¬å™¨ã€‚ è¿™å°†å…è®¸è§¦å‘å™¨åœ¨çŸ¥é“é‚£äº›æ›´æ”¹è¿‡çš„æ–‡ä»¶çš„æƒ…å†µä¸‹åšä¸€äº›äº‹æƒ…ã€‚

```python
@app.after_reload_tend
async def after _reload_trigger(_, æ›´æ”¹):
    æ‰“å°(æ›´æ”¹)
```

## è°¢è°¢ä½ 

Thank you to everyone that participated in this release: :clap:

[@ahopkins](https://github.com/ahopkins)
[@ChihweiLHBird](https://github.com/ChihweiLHBird)
[@freddiewanah](https://github.com/freddiewanah)
[@gluhar2006](https://github.com/gluhar2006)
[@iAndriy](https://github.com/iAndriy)
[@MichaelHinrichs](https://github.com/MichaelHinrichs)
[@prryplatypus](https://github.com/prryplatypus)
[@SaidBySolo](https://github.com/SaidBySolo)
[@sjsadowski](https://github.com/sjsadowski)
[@talljosh](https://github.com/talljosh)
[@tjni](https://github.com/tjni)
[@Tronic](https://github.com/Tronic)

***

å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œè¯·è€ƒè™‘ææ¬¾ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å–œæ¬¢ä»£ç è´¡çŒ®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå–œæ¬¢ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚ è€ƒè™‘æ’°å†™ä¸€äº›æ–‡æ¡£ï¼Œæ˜¾ç¤ºå…³é—­çš„æƒ…å†µï¼ŒåŠ å…¥å¯¹è¯å¹¶è®©æ‚¨çš„å£°éŸ³ä¸ºäººæ‰€çŸ¥ï¼Œå¦‚æœæ‚¨èƒ½å¤Ÿï¼š[é‡‘èè´¡çŒ®](https://opencollective.com/sanic-org/)ã€‚
