---
title: 23.3 ç‰ˆæœ¬
---

# 23.3 ç‰ˆæœ¬

.. toc::

## ä¸€. å¯¼è¨€

è¿™æ˜¯ç¬¬23ç‰ˆçš„ç¬¬ä¸€æ¬¡ç‰ˆæœ¬[å‘è¡Œå‘¨æœŸ](../../org/policies.md#release-schedule)ã€‚ å› æ­¤å«æœ‰ä¸€äº›åºŸå¼ƒçš„åè§ï¼Œå¸Œæœ›æœ‰äº›_å°_æ–­è£‚çš„ä¿®æ”¹ã€‚ å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ [GitHub](https://github.com/sanic-org/sanic/issues/new/selecte) ä¸Šæå‡ºä¸€ä¸ªé—®é¢˜ã€‚

## äº†è§£ä»€ä¹ˆ

æ›´å¤šè¯¦ç»†ä¿¡æ¯åœ¨ [Changelog](https://sanic.readthedocs.io/en/stable/sanic/changelog.html)ã€‚ æ˜¾è‘—çš„æ–°åŠŸèƒ½æˆ–ç ´æŸåŠŸèƒ½ä»¥åŠå‡çº§å†…å®¹...

### è¾ƒå¥½çš„è¿½è¸ªæ ¼å¼

ä¸Šåˆç»„ç»‡åœ¨GitHubä¸Šé€šè¿‡äº†ä¸¤ä¸ªé¡¹ç›®ï¼Œå°†å…¶çº³å…¥Sanicå‘½åç©ºé—´ï¼š [tracerite](https://github.com/sanic-org/tracerite) å’Œ [html5tagger](https://github.com/sanic-org/html5tagger)ã€‚ è¿™äº›é¡¹ç›®å›¢é˜Ÿå¯ä»¥æä¾›å’Œä»¤äººéš¾ä»¥ç½®ä¿¡çš„æ–°é”™è¯¯é¡µé¢ï¼Œå¹¶æä¾›æ›´å¤šè¯¦ç»†ä¿¡æ¯æ¥å¸®åŠ©è°ƒè¯•è¿‡ç¨‹ã€‚

è¿™æ˜¯ç”±æ–¹æ¡†æä¾›çš„ï¼Œå¹¶å°†è°ƒæ•´ä»¥åªæ˜¾ç¤ºç›¸å…³ä¿¡æ¯ï¼Œä¸ç®¡æ˜¯åœ¨DEBUG æ›´å¤šè¿˜æ˜¯PROD æ¨¡å¼ã€‚

.. åˆ—:

```
**Using PROD mode**
![image](/assets/images/error-html-no-debug.png)
```

.. åˆ—:

```
**Using DEBUG mode**
![image](/assets/images/error-html-debug.png)
```

æµ…æš—æ¨¡å¼çš„ HTML é¡µé¢å¯ç”¨ï¼Œå°†è¢«éšå«ä½¿ç”¨ã€‚

### ç›®å½•ä¸Šçš„åŸºæœ¬æ–‡ä»¶æµè§ˆå™¨

å½“ä½¿ç”¨é™æ€å¤„ç†å™¨çš„ç›®å½•æ—¶ï¼ŒSanicå¯ä»¥è¢«é…ç½®ä¸ºæ˜¾ç¤ºåŸºæœ¬æ–‡ä»¶æµè§ˆå™¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `directory_view=True`ã€‚

.. åˆ—:

````
```python
app.static("/uploads/", "/path/to/dir/", directory_view=True)
```
````

.. åˆ—:

```
![image](/assets/images/directory-view.png)
```

æµ…æš—æ¨¡å¼çš„ HTML é¡µé¢å¯ç”¨ï¼Œå°†è¢«éšå«ä½¿ç”¨ã€‚

### ä½¿ç”¨ Python çš„ HTML æ¨¡æ¿

å› ä¸ºSanicæ­£åœ¨ä½¿ç”¨ [html5tagger](https://github)ã€‚ om/sanic-org/html5taggerï¼Œç”¨äºæ¸²æŸ“[æ–°çš„é”™è¯¯é¡µé¢](#nicer-traceback-forming), æ‚¨ç°åœ¨æœ‰å¯ç”¨çš„è½¯ä»¶åŒ…å¯ä»¥è½»æ¾ç”ŸæˆPythonä»£ç çš„ HTML é¡µé¢ï¼š

.. åˆ—:

````
```python
from html5tagger import Document
from sanic import Request, Sanic, html

app = Sanic("æµ‹è¯•åº”ç”¨")

@app. et("/")
async def å¤„ç†å™¨(è¯·æ±‚: è¯·æ±‚):
    doc = Document("æˆ‘çš„ç½‘ç«™")
    doc. 1 ("ä½ å¥½ï¼Œä¸–ç•Œã€‚")
    ä¸doc. able(id="data "):
        doc.tr.th("First").th("Second"). h("Third")
        doc.tr.td(1).td(2).td(3)
    doc. (tclass_="text")("A paragraph with ")
    doc.ahhref="/files")("a link")(" and ").em("æ ¼å¼åŒ–")
    return html(doc)
```
````

.. åˆ—:

````
```html
<!DOCTYPE html>
<meta charset="utf-8">
<title>æˆ‘çš„ç½‘ç«™</title>
<h1>Hello, worldã€‚</h1>
<table id=data>
    <tr>
        <th>First
        <th>Second
        <th>Third
    <tr>
        <td>1
        <td>2
        <td>3
</table>
<p class=text>
 <a href="/files">A paragraph with <a href="/files"> a link</a> and <em>forming</em>
```
````

### è‡ªåŠ¨ç´¢å¼•æœåŠ¡åœ¨é™æ€å¤„ç†ç¨‹åºä¸Šå¯ç”¨

Sanic ç°åœ¨å¯ä»¥é…ç½®ä¸ºé™æ€ç›®å½•æ—¶çš„ç´¢å¼•æ–‡ä»¶ã€‚

```python
app.static("/assets/", "/path/to/some/dir", index="index.html")
```

å½“ä½¿ç”¨ä¸Šè¿°å†…å®¹æ—¶ï¼Œ`http://example.com/assets/`å°†è‡ªåŠ¨ä¸ºä½äºè¯¥ç›®å½•çš„`index.html`æ–‡ä»¶æœåŠ¡ã€‚

### ç®€å•çš„ CLI ç›®æ ‡

Sanic åº”ç”¨ç¨‹åºé€šå¸¸ä½¿ç”¨å˜é‡`app`ä½œä¸ºåº”ç”¨ç¨‹åºå®ä¾‹ã€‚ ç”±äºè¿™ä¸ªåŸå› ï¼Œ CLI åº”ç”¨ç¨‹åºç›®æ ‡ (`sanic` CLI å‘½ä»¤çš„ç¬¬äºŒå€¼) ç°åœ¨è¯•å›¾æ ¹æ®ç›®æ ‡æ¨æ–­åº”ç”¨ç¨‹åºå®ä¾‹ã€‚ å¦‚æœç›®æ ‡æ˜¯åŒ…å«ä¸€ä¸ª`app`å˜é‡çš„æ¨¡å—ï¼Œå®ƒå°†ä½¿ç”¨å®ƒã€‚

ç°åœ¨æœ‰å››ç§å¯èƒ½çš„æ–¹å¼ä»åœ°æ–¹å€¡è®®å¯åŠ¨ä¸€ä¸ªSanicåº”ç”¨ç¨‹åºã€‚

#### 1. åº”ç”¨ç¨‹åºå®ä¾‹

æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ºæ¨¡å—å’Œåº”ç”¨ç¨‹åºå®ä¾‹æä¾›è·¯å¾„å°†æŒ‰é¢„æœŸå·¥ä½œã€‚

```sh
sanic path.to.module:app # å…¨å±€åº”ç”¨å®ä¾‹
```

#### 2. åº”ç”¨å·¥å‚ï¼š

ä»¥å‰ï¼Œä¸ºäº†æœåŠ¡å‡ºå‚æ¨¡å¼ï¼Œä½ éœ€è¦ä½¿ç”¨ "--factory" æ——å¸œã€‚ ç°åœ¨å¯ä»¥çœç•¥ã€‚

```sh
sanic path.to.module:create_app # å‡ºå‚æ¨¡å¼
```

#### 3. å¯åŠ¨Sanic ç®€å•æœåŠ¡å™¨è·¯å¾„

åŒæ ·ï¼Œè¦å¯åŠ¨ Sanic ç®€å•æœåŠ¡å™¨ (æœåŠ¡é™æ€ç›®å½•)ï¼Œæ‚¨ä»¥å‰éœ€è¦ä½¿ç”¨ "--simple" æ——å¸œã€‚ ç°åœ¨è¿™å¯ä»¥çœç•¥ï¼Œè€Œåªæ˜¯æä¾›åˆ°ç›®å½•çš„è·¯å¾„ã€‚

```sh
sanic ./path/to/directory/ # ç®€å•æœåŠ¡
```

#### 4. åŒ…å«ä¸€ä¸ª`app`å˜é‡çš„ Python æ¨¡å—

å¦‚ä¸Šæ‰€è¿°ï¼Œå¦‚æœç›®æ ‡æ˜¯åŒ…å«ä¸€ä¸ª`app`å˜é‡çš„æ¨¡å—ï¼Œ å®ƒå°†ä½¿ç”¨é‚£ä¸ª(å‡è®¾`app`å˜é‡æ˜¯ä¸€ä¸ª `Sanic` å®ä¾‹)ã€‚

```sh
å¸¦æœ‰åº”ç”¨ç¨‹åºå®ä¾‹çš„ sanic path.to.module # æ¨¡å—
```

### æ›´æ–¹ä¾¿çš„ cookie è®¾ç½®å’Œåˆ é™¤

æ—§çš„ cookie æ¨¡å¼éå¸¸ç³Ÿç³•ï¼Œå¾ˆéš¾æ‰¾ã€‚ å®ƒçœ‹èµ·æ¥ä¸åƒæ™®é€šçš„ Python ï¼Œå› ä¸ºé‚£ä¸ªå°ºå¯¸ä¸‹â€œé­”æ³•â€ã€‚

.. åˆ—:

```
:fac_screaming_in_fear: è¿™ä¸æ˜¯ç›´è§‚çš„ï¼Œå¯¹æ–°æ¥è€…æ¥è¯´æ˜¯æ··æ·†ä¸æ¸…çš„ã€‚
```

.. åˆ—:

````
```python
response = text("åœ¨è¿™ä¸ªå“åº”ä¸­æœ‰ä¸€ä¸ª cookie ")
response.cookies["test"] = "å®ƒæ­£å¸¸å·¥ä½œï¼"
å“åº”ã€‚ ookies["test"]["domain"] = ".yummy-yummy-cookie.com"
response.cookies["test"]["httuponly"] = True
```
````

ç°åœ¨å·²ç»æœ‰äº†æ–°çš„æ–¹æ³•ï¼ˆä»¥åŠå®Œå…¨å…¨é¢çš„`Cookie`å’ŒCookieJar\`å¯¹è±¡ï¼‰æ¥ä½¿è¿™ä¸ªè¿‡ç¨‹æ›´åŠ æ–¹ä¾¿ã€‚

.. åˆ—:

```
ğŸ˜Œ Ahh... éå¸¸å¥½ã€‚
```

.. åˆ—:

````
```python
response = text("åœ¨è¿™ä¸ªå“åº”ä¸­æœ‰cookie")
responseã€‚ dd_cookie(
    "test",
    "it å·¥ä½œ!",
    domain=". ummy-yummy-cookie.com",
    httponly=True
)
```
````

### æ›´å¥½çš„ cookie å…¼å®¹æ€§

Sanic å¢åŠ äº†å¯¹ [cookie å‰ç¼€](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#cookie_prefixes)çš„æ”¯æŒï¼Œä½¿è¯»å–å’Œå†™ä¸‹è¿™äº›å€¼çœ‹èµ·æ¥å˜å¾—è¶Šæ¥è¶Šç®€å•ã€‚

è®¾ç½®cookieæ—¶...

```py
å“åº”.cookies.add_cookie("foo", "bar", host_prefix=True)
```

è¿™å°†åˆ›å»ºé¢„è®¾çš„ cookie: `__Host-foo`ã€‚ ç„¶è€Œï¼Œå½“è®¿é—®ä¼ å…¥è¯·æ±‚æ—¶æ‚¨å¯ä»¥åœ¨ä¸çŸ¥é“å¤´éƒ¨å­˜åœ¨çš„æƒ…å†µä¸‹è®¿é—®cookieã€‚

```py
cookie.get("foo")
```

è¿˜åº”è¯¥æ³¨æ„åˆ°ï¼Œcookieå¯ä»¥ä½œä¸ºå±æ€§è®¿é—®ï¼Œå¦‚ [headers](#access-any-header-as a property)ã€‚

```python
Cookie.foo
```

è€Œä¸”ï¼Œcookieç±»ä¼¼äºâ€œrequest.argsâ€å’Œâ€œrequest.formâ€å¯¹è±¡ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨ `getlist` è·å–å¤šä¸ªå€¼ã€‚

```py
cookie.getlist("foo")
```

è¿˜æ·»åŠ äº†æ”¯æŒåˆ›å»º [åˆ†åŒºçš„ cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#partitioned_cookie)ã€‚

```py
å“åº”.cookies.add_cookie(...ï¼Œåˆ†åŒº=True)
```

### ğŸš¨ _Breakingå˜æ¢_ - æ›´åŠ ä¸€è‡´å’Œå¼ºå¤§çš„ `SanicException`

Sanicå·²ç»æœ‰ä¸€æ®µæ—¶é—´å°†`SanicException`ä½œä¸ºåŸºæœ¬ç±»åˆ«çš„ä¾‹å¤–ã€‚ å¯å°†å…¶æ‰©å±•åˆ°æ·»åŠ `status_code`ç­‰ï¼ˆè¯¦è§http\://localhost:8080/en/guide/best practices/exceptions.htmlï¼‰ã€‚

**NOW**ï¼Œä½¿ç”¨æ‰€æœ‰ä¸åŒçš„ä¾‹å¤–å·²å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ é€šå¸¸ä½¿ç”¨çš„å¼‚å¸¸å¯ä»¥ç›´æ¥ä» root çº§æ¨¡å—å¯¼å…¥ã€‚

```python
ä» NotFound, æœªç»æˆæƒ, BadRequest, ServerError
```

æ­¤å¤–ï¼Œæ‰€æœ‰è¿™äº›å‚æ•°éƒ½å¯ä»¥ä½œä¸ºå…³é”®è¯å‚æ•°ç”¨äºæ¯ä¸ªå¼‚å¸¸ç±»å‹ï¼š

| å‚æ•°        | ç±»å‹     | æè¿°                         |
| --------- | ------ | -------------------------- |
| å®‰é™\`      | `bool` | ä»æ—¥å¿—ä¸­å–æ¶ˆè·Ÿè¸ª                   |
| `context` | `dict` | é”™è¯¯é¡µé¢_æ€»æ˜¯æ˜¾ç¤ºé¢å¤–ä¿¡æ¯_             |
| `extra`   | `dict` | åœ¨ \*DEBUG æ¨¡å¼ä¸‹çš„é”™è¯¯é¡µé¢ä¸­æ˜¾ç¤ºçš„é¢å¤–ä¿¡æ¯ |
| `headers` | `dict` | å“åº”ä¸­å‘é€çš„æ›´å¤šä¿¡å¤´                 |

æ‰€æœ‰è¿™äº›æœ¬èº«éƒ½ä¸æ˜¯æ–°çš„ç‰¹å¾ã€‚ ç„¶è€Œï¼Œå®ƒä»¬åœ¨å¦‚ä½•ä½¿ç”¨å®ƒä»¬æ–¹é¢æ›´åŠ ä¸€è‡´ï¼Œä»è€Œåˆ›é€ äº†ä¸€ç§ç›´æ¥æ§åˆ¶é”™è¯¯å“åº”çš„å¼ºå¤§æ–¹å¼ã€‚

```py
å‡èµ·æœåŠ¡å™¨é”™è¯¯(headers={"foo": "bar"})
```

è¿™ç§å˜åŒ–çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†æ˜¯ï¼Œæœ‰äº›åŸå…ˆçš„ç«‹åœºè®ºç‚¹ç°åœ¨åªæ˜¯å…³é”®è¯ã€‚

é¼“åŠ±æ‚¨æŸ¥çœ‹[API æ–‡æ¡£](https://sanic.readthedocs.io/en/stable/sanic/api/exceptions.html#module-sanic.exceptions)ä¸­æ¯ä¸ªé”™è¯¯çš„å…·ä½“å®ç°ã€‚

### ğŸš¨ _Breakingå˜æ¢_ - åˆ·æ–°`Request.accept` åŠŸèƒ½ä»¥æé«˜æ€§èƒ½å’ŒæŠ•å½±å…¼å®¹æ€§

è§£æ`æ¥å—`æ ‡é¢˜'åˆ° `Request.accept` è®¿é—®å™¨å·²ç»æ”¹è¿›ã€‚ å¦‚æœä½ æ­£åœ¨ä½¿ç”¨è¿™ä¸ªè´¢äº§å¹¶ä¾é å®ƒçš„å¹³ç­‰æ“ä½œï¼Œè¿™ç§æƒ…å†µå·²ç»æ”¹å˜ã€‚ æ‚¨å¯èƒ½åº”è¯¥è½¬æ¢ä¸º `request.accept.match()` æ–¹æ³•ã€‚

### ä»¥å±æ€§è®¿é—®ä»»ä½•é¡µçœ‰å†…å®¹

ä¸ºäº†ç®€åŒ–å¯¹é¡µçœ‰çš„è®¿é—®æƒé™ï¼Œæ‚¨å¯ä»¥è®¿é—®åŸå§‹(æœªè§£æçš„)é¡µçœ‰ç‰ˆæœ¬ä½œä¸ºå±æ€§ã€‚ æ ‡é¢˜çš„åç§°æ˜¯æ‰€æœ‰å°å†™å­—æ¯ä¸­çš„å±æ€§çš„åç§°, å¹¶åˆ‡æ¢ä»»ä½•è¿å­—ç¬¦(`-`) åˆ°ä¸‹åˆ’çº¿ (`_`).

ä¾‹å¦‚ï¼š

.. åˆ—:

````
```
GET /foot/bar HTTP/1.1
ä¸»æœºï¼šlocalhost
User-Agent: curl/7.88.1
X-Request-ID: 123ABC
```
````

.. åˆ—:

````
```py
request.headers.host
request.headers.user_agent
request.headers.x_request_id
```
````

### é»˜è®¤æ¶ˆè€—`DELETE` ä½“

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ª `DELETE` è¯·æ±‚çš„æ­£æ–‡å°†ä¼šè¢«æ¶ˆè€—å¹¶è¯»å–åˆ° `Request` å¯¹è±¡ã€‚ è¿™å°†ä½¿`body`åƒ`POST`ã€`PUT`å’Œ`PATCH`è¯·æ±‚ä¸€æ ·æ— éœ€é‡‡å–ä»»ä½•è¿›ä¸€æ­¥è¡ŒåŠ¨ã€‚

### è‡ªå®šä¹‰ `CertLoader` ç”¨äºç›´æ¥æ§åˆ¶åˆ›å»º `SSLContext`

æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½æƒ³è¦åˆ›å»ºè‡ªå·±çš„ `SSLContext` å¯¹è±¡ã€‚ è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„ `CertLoader` å­ç±»ï¼Œç”Ÿæˆä½ æ‰€éœ€çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚

```python
ä» sanic.worker.loader å¯¼å…¥ CertLoader

ç±» MyCertLoader(CertLoader):
    def load(self, app: Sanic) -> SSLContext:
        ...

app = Sanic(...certloader_class=MyCertLoader)
```

### åºŸå¼ƒå’Œç§»é™¤

1. _DEECATED_-Dict-æ ·å¼ cookie è®¾ç½®
2. _DEECATED_ - ä½¿ç”¨ JSON æ•°æ®è¯·æ±‚ä½¿ç”¨JSON é”™è¯¯æ ¼å¼åŒ–ä¸€ä¸ªå› ç´ æ—¶ä½¿ç”¨ JSON æ•°æ®
3. _REMOVED_ -  Remove deprecated `__blueprintname__` property
4. _åˆ é™¤_ - é‡å¤è·¯ç”±åç§°
5. _REMOVED_ - é‡å¤å¼‚å¸¸å¤„ç†å™¨å®šä¹‰
6. _REMOVED_ - å¸¦ç€æ——å¸œçš„æ£€æŸ¥å™¨ CLI
7. _REMOVED_ - æ—§æœåŠ¡å™¨(åŒ…æ‹¬`sanic.server.serve_single` å’Œ `sanic.server.serve_multiple`)
8. _REMOVED_ - ä½¿ç”¨å­—èŠ‚å­—ç¬¦ä¸²çš„ç›®å½•
9. _REMOVED_ - `Request.request_middleware_started`
10. _REMOVED_ - `Websocket.connection`

#### ä¸å†å…è®¸é‡å¤çš„è·¯ç”±åç§°

åœ¨ç¬¬22.9ç‰ˆä¸­ï¼ŒSanicå®£å¸ƒè¯´ï¼ŒV23.3ä¸å…è®¸ä½¿ç”¨é‡å¤åç§°æ³¨å†Œè·¯çº¿ã€‚ å¦‚æœä½ çœ‹åˆ°ä»¥ä¸‹é”™è¯¯ï¼Œå®ƒæ˜¯å› ä¸ºè¿™ç§æ”¹å˜ï¼š

> å¼‚å¸¸ã€‚æœåŠ¡å™¨é”™è¯¯ï¼šæ£€æµ‹åˆ°é‡å¤çš„è·¯ç”±åç§°ï¼šæœ‰äººApp.some_handlerã€‚ æ‚¨åº”è¯¥ä½¿ç”¨ "name" å‚æ•°æ¥æ˜ç¡®é‡å‘½åå…¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œ æˆ–æ›´æ”¹æ¥è‡ªç±»å’Œå‡½æ•°åç§°çš„éšå«åç§°ã€‚ æ¬²äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œè¯·è®¿é—®https\://sanic.dev/en/guide/release-notes/v23.3.html#carbated-route-names-are-no longer-allowed

å¦‚æœä½ çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œä½ åº”è¯¥é€‰æ‹©ä¸ºä½ çš„è·¯çº¿ä½¿ç”¨æ˜ç¡®çš„åç§°ã€‚

.. åˆ—:

````
**BAD**
```python
app = Sanic("æœ‰äººåº”ç”¨")

@app.get("/")
@app.get("/foo")
async def handler(è¯·æ±‚):
```
````

.. åˆ—:

````
**GOOD**
```python
app = Sanic("æœ‰äººåº”ç”¨")

@app.get("/", name="root")
@app.get("/foo", name="foo")
async def handler(è¯·æ±‚):
```
````

#### å“åº” cookie

å“åº” cookie ä»…ä¸ºäº†å…¼å®¹èµ·ä½œç”¨çš„ `dict` ã€‚ åœ¨ç‰ˆæœ¬24.3ä¸­ï¼Œæ‰€æœ‰çš„`dict`æ–¹æ³•å°†è¢«åˆ é™¤ï¼Œåº”ç­”çš„ cookie å°†ä»…ä¸ºå¯¹è±¡ã€‚

å› æ­¤ï¼Œå¦‚æœæ‚¨ä½¿ç”¨æ­¤æ¨¡å¼æ¥è®¾ç½® cookie å±æ€§ï¼Œæ‚¨éœ€è¦åœ¨ç‰ˆæœ¬ 24.3 ä¹‹å‰å‡çº§å®ƒã€‚

```python
resp = HTTPResponse()
resp.cookies["foo"] = "bar"
resp.cookies["foo"]["httponly"] = True
```

ç›¸åï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ "add_cookie" æ–¹æ³•ï¼š

```python
resp = HTTPResponse()
resp.add_cookie("foo", "bar", httponly=True)
```

#### è¯·æ±‚ cookie

Sanicå¢åŠ äº†å¯¹é˜…è¯»é‡å¤çš„ cookie å¯†é’¥çš„æ”¯æŒï¼Œä»¥ä¾¿æ›´åŠ ç¬¦åˆRFC è§„æ ¼ã€‚ To retain backwards compatibility, accessing a cookie value using `__getitem__` will continue to work to fetch the first value sent. å› æ­¤ï¼Œåœ¨ç¬¬23.3ç‰ˆå’Œä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™å°†æ˜¯â€œTrueâ€ã€‚

```python
cookie["foo"] == "bar"
åšæŒrequest.cookies.get("foo") == "bar"
```

ç‰ˆæœ¬23.3æ·»åŠ äº† `getlist`

```python
cookies.getlist("foo") == ["bar"]
```

å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œ`get` å’Œ `getlist` ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯å¯ç”¨çš„ï¼Œç±»ä¼¼äºå®ƒä»¬åœ¨å…¶ä»–è¯·æ±‚å±æ€§ä¸Šçš„å­˜åœ¨æ–¹å¼(`request.args`, `request.form`, ç­‰ç­‰)ã€‚ Starting in v24.3, the `__getitem__` method for cookies will work exactly like those properties. This means that `__getitem__` will return a list of values.

å› æ­¤ï¼Œå¦‚æœä½ åªèƒ½ä¾é æ­¤åŠŸèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œä½ åº”è¯¥åœ¨v24.3ä¹‹å‰å‡çº§åˆ°ä»¥ä¸‹æ¨¡å¼ã€‚

```python
cookies["foo"] == ["bar"]
åšæŒrequest.cookies.get("fo") == "bar"
signing request.cookies.getlist("foo") == ["bar"]
```

## è°¢è°¢ä½ 

Thank you to everyone that participated in this release: :clap:

[@ahopkins](https://github.com/ahopkins)
[@ChihweiLHBird](https://github.com/ChihweiLHBird)
[@deounix](https://github.com/deounix)
[@Kludex](https://github.com/Kludex)
[@mbendiksen](https://github.com/mbendiksen)
[@prryplatypus](https://github.com/prryplatypus)
[@r0x0d](https://github.com/r0x0d)
[@SaidBySolo](https://github.com/SaidBySolo)
[@sjsadowski](https://github.com/sjsadowski)
[@stricaud](https://github.com/stricaud)
[@Tracyca209](https://github.com/Tracyca209)
[@Tronic](https://github.com/Tronic)

***

å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œè¯·è€ƒè™‘ææ¬¾ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å–œæ¬¢ä»£ç è´¡çŒ®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå–œæ¬¢ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚ è€ƒè™‘æ’°å†™ä¸€äº›æ–‡æ¡£ï¼Œæ˜¾ç¤ºå…³é—­çš„æƒ…å†µï¼ŒåŠ å…¥å¯¹è¯å¹¶è®©æ‚¨çš„å£°éŸ³ä¸ºäººæ‰€çŸ¥ï¼Œå¦‚æœæ‚¨èƒ½å¤Ÿï¼š[é‡‘èè´¡çŒ®](https://opencollective.com/sanic-org/)ã€‚
