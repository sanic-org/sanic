---
title: ç‰ˆæœ¬24.6
---

# ç‰ˆæœ¬24.6

.. toc::

## ä¸€. å¯¼è¨€

è¿™æ˜¯ç‰ˆæœ¬ 24 [å‘è¡Œå‘¨æœŸ] (../../organization/policies.md#release-schedule) çš„é¦–ä¸ªç‰ˆæœ¬ã€‚  v24 çš„å‘å¸ƒèŠ‚å¥å¯èƒ½ä¸è¿‡å»å‡ å¹´ç•¥æœ‰ä¸åŒã€‚ è¯·ç¡®ä¿ä½ å·²ç»åŠ å…¥äº†DiscordæœåŠ¡å™¨æ¥è·Ÿè¿›æœ€æ–°ä¿¡æ¯ã€‚ å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ [GitHub](https://github.com/sanic-org/sanic/issues/new/selecte) ä¸Šæå‡ºé—®é¢˜ã€‚

## éœ€è¦äº†è§£çš„å†…å®¹

æ›´å¤šè¯¦ç»†ä¿¡æ¯åœ¨ [Changelog](../changelog.html) å¯ä¾›æŸ¥é˜…ã€‚ å¼•äººæ³¨ç›®çš„æ–°åŠŸèƒ½æˆ–ç ´åæ€§æ›´æ–°ä»¥åŠå‡çº§å†…å®¹ï¼š

### æ—¥å¿—æ”¹è¿›

é»˜è®¤æ—¥å¿—æ ¼å¼å·²å¾—åˆ°æ¸…ç†ï¼Œå› æ­¤å½“ä»æ§åˆ¶å°ä¼šè¯é˜…è§ˆæ—¥å¿—æ—¶ï¼Œå¯¹å¼€å‘è€…ä¼šæ›´åŠ å‹å¥½ã€‚ è¿™åŒ…æ‹¬ï¼šä½¿ç”¨é¢œè‰²è¿›è¡Œé«˜äº®å’Œå‡å°‘å†—ä½™å†…å®¹ã€‚

Sanic å°†æ ¹æ®æ‚¨çš„æœåŠ¡å™¨æ˜¯å¦å¤„äº DEBUG æ¨¡å¼åœ¨ä¸¤ç§ç»†å¾®å˜åŒ–ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚ æ‚¨å§‹ç»ˆå¯ä»¥é€‰æ‹©ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å»é™¤æ—¥å¿—æ‰“å°çš„é¢œè‰²ï¼š

```python
app.config.NO_COLOR = True
```

é¢œè‰²å°†è‡ªåŠ¨ä»é TTY ç»ˆç«¯çš„æ—¥å¿—ä¸­å»é™¤ã€‚

åœ¨ä½¿ç”¨`sanic.logging.formatter.AutoFormatter`å’Œ`sanic.logging.formatter.AutoAccessFormatter`æ—¶ï¼ŒSanicä¼šè‡ªåŠ¨æ ¹æ® DEBUG å’Œ PROD æ¨¡å¼è¿›è¡Œæ—¥å¿—æ ¼å¼çš„åˆ‡æ¢ã€‚ å½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨é€‚å½“å‘½åçš„æ ¼å¼åŒ–ç¨‹åºå¼ºåˆ¶ä½¿ç”¨ä¸€ä¸ªç‰ˆæœ¬æˆ–å¦ä¸€ä¸ªç‰ˆæœ¬

#### åœ¨ DEBUG æ¨¡å¼

```python
sanic.logging.formatter.DebugFormatter
sanic.logging.formatter.DebugAccessFormatter
```

![](/assets/images/logging-dev.png)

#### åœ¨PRODæ¨¡å¼

```python
sanic.logging.formatter.ProdFormatter
sanic.logging.formatter.ProdAccessFormatter
```

![](/assets/images/logging-prod.png)

#### é—ç•™é—®é¢˜

å¦‚æœæ‚¨æ›´å–œæ¬¢æ—§å¼çš„æ—¥å¿—è®°å½•ï¼Œè¿™äº›æ—¥å¿—æ ¼å¼åŒ–ç¨‹åºä¹Ÿä¸ºä½ ä¿ç•™äº†è¿™ç±»æ ¼å¼ï¼š`sanic.logging.formatter.LegacyFormatter`å’Œ`sanic.logging.formatter.LegacyAccessFormatter`ã€‚

å®ç°è¿™äº›æ ¼å¼åŒ–çš„ä¸€ç§æ–¹å¼ï¼š

```python
from sanic.log import LOGGING_CONFIG_DEFAULTS

LOGGING_CONFIG_DEFAULTS["formatters"] = {
    "generic": {
        "class": "sanic.logging.formatter.LegacyFormatter"
    },
    "access": {
        "class": "sanic.logging.formatter.LegacyAccessFormatter"
    },
}
```

#### æ–° JSON formatter

è¿˜æœ‰ä¸€ä¸ªæ–°çš„ JSON æ—¥å¿—æ ¼å¼åŒ–å™¨ï¼ˆFormatterï¼‰ï¼Œå®ƒå°†ä»¥JSON æ ¼å¼è¾“å‡ºæ—¥å¿—ä»¥ä¾¿ä¸å…¶ä»–ç¬¬ä¸‰æ–¹æ—¥å¿—å¹³å°é›†æˆã€‚

```python
from sanic.log import LOGGING_CONFIG_DEFAULTS

LOGGING_CONFIG_DEFAULTS["formatters"] = {
    "generic": {
        "class": "sanic.logging.formatter.JSONFormatter"
    },
    "access": {
        "class": "sanic.logging.formatter.JSONAccessFormatter"
    },
}
```

### åœ¨ unix å¥—æ¥å­—ä¸­ä½¿ç”¨Path

åœ¨ä¸ºæœåŠ¡å™¨åˆ›å»º unix å¥—æ¥å­—æ—¶ï¼Œç°åœ¨å¯ä»¥é€šè¿‡ä¼ é€’`pathlib.Path`å¯¹è±¡ï¼ˆè€Œä¸æ˜¯ä»…åŸºäºå­—ç¬¦ä¸²çš„è·¯å¾„ï¼‰æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚

### è‡ªå®šä¹‰è·¯ç”±åç§°

æ‚¨å¯ä»¥åœ¨è‡ªå®šä¹‰ `Sanic` æˆ– `Blueprint` ä¸Šè¦†ç›–`generate_name` æ–¹æ³•ã€‚ è¿™å°†å…è®¸æ‚¨éšæ„ä¿®æ”¹è·¯ç”±åç§°ã€‚

```python
from sanic import Sanic, text,

class Custom(Sanic):
    def generate_name(self, *objects):
        existing = self._generate_name(*objects)
        return existing.upper()
        
app = Sanic("Foo")

@app.get("/")
async def handler(request):
    return text(request.name)  # FOO.HANDLER

    
return app
```

### ğŸš¨ ç ´åæ€§æ›´æ”¹

1. `Request.cookies.getlist` æ€»æ˜¯è¿”å› `list` ã€‚ è¿™æ„å‘³ç€ï¼Œå¦‚æœæ²¡æœ‰ `key` çš„ cookie æ—¶ï¼Œå®ƒå°†æ˜¯ç©ºçš„ `list` è€Œä¸æ˜¯ `None'ã€‚ ä½¿ç”¨ `Request.cookies.getlist("something", None)\` æ¥ä¿ç•™ç°æœ‰çš„è¡Œä¸ºã€‚

## ç‰¹åˆ«é¸£è°¢

æ„Ÿè°¢å‚ä¸åˆ°æœ¬æ¬¡è¿­ä»£çš„æ‰€æœ‰äººï¼š:clap:

[@ahopkins](https://github.com/ahopkins)
[@ashleysommer](https://github.com/ashleysommer)
[@ChihweiLHBird](https://github.com/ChihweiLHBird)
[@DeJayDev](https://github.com/DeJayDev)
[@ekzhang](https://github.com/ekzhang)
[@Huy-Ngo](https://github.com/Huy-Ngo)
[@iAndriy](https://github.com/iAndriy)
[@jakkaz](https://github.com/jakkaz)
[@Nano112](https://github.com/Nano112)
[@prryplatypus](https://github.com/prryplatypus)
[@razodactyl](https://github.com/razodactyl)
[@Tronic](https://github.com/Tronic)
[@wieczorek1990](https://github.com/wieczorek1990)

---

å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œè¯·è€ƒè™‘å‚ä¸è´¡çŒ®ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å–œæ¬¢ä»£ç è´¡çŒ®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå–œæ¬¢ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚ è€ƒè™‘æ’°å†™ä¸€äº›æ–‡æ¡£ï¼Œæä¾›ä¸€äº›æ¡ˆä¾‹ï¼ŒåŠ å…¥äº¤æµå¹¶è®©æ‚¨çš„å£°éŸ³ä¸ºäººæ‰€çŸ¥ï¼Œå¦‚æœæ‚¨èƒ½å¤Ÿï¼š[è´¢åŠ¡ææ¬¾](https://opencollective.com/sanic-org/)ï¼Œé‚£å†å¥½ä¸è¿‡äº†ã€‚
