---
title: ç‰ˆæœ¬24.6
---

# ç‰ˆæœ¬24.6

.. toc::

## ä¸€. å¯¼è¨€

è¿™æ˜¯ç‰ˆæœ¬ 24 [å‘è¡Œå‘¨æœŸ] (../../organization/policies.md#release-schedule) çš„ç¬¬ä¸€æ¬¡ç‰ˆæœ¬ã€‚  ä¸è¿‡å»å‡ å¹´ç›¸æ¯”ï¼Œé‡Šæ”¾24äººçš„é˜Ÿä¼å¯èƒ½ç•¥æœ‰æ”¹å˜ã€‚ è¯·ç¡®ä¿åœ¨DiscordæœåŠ¡å™¨ä¸Šæ›´æ–°æœ€æ–°ä¿¡æ¯ã€‚ å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ [GitHub](https://github.com/sanic-org/sanic/issues/new/selecte) ä¸Šæå‡ºä¸€ä¸ªé—®é¢˜ã€‚

## äº†è§£ä»€ä¹ˆ

æ›´å¤šè¯¦ç»†ä¿¡æ¯åœ¨ [Changelog](../changelog.html)ã€‚ æ˜¾è‘—çš„æ–°åŠŸèƒ½æˆ–ç ´æŸåŠŸèƒ½ä»¥åŠå‡çº§å†…å®¹ï¼š

### æ—¥å¿—æ”¹è¿›

é»˜è®¤æ—¥å¿—æ¨¡å¼å·²è¢«æ¸…ç†ï¼Œä»¥ä½¿å®ƒä»¬åœ¨ä»ç»ˆç«¯ä¼šè¯ä¸­æŸ¥çœ‹æ—¶æ›´æ–¹ä¾¿å¼€å‘è€…ã€‚ è¿™åŒ…æ‹¬ä½¿ç”¨é¢œè‰²å’Œè¾ƒå°‘è¯¦ç»†çš„æ ¼å¼åŒ–ã€‚

Sanic å°†æ ¹æ®æ‚¨çš„æœåŠ¡å™¨æ˜¯å¦å¤„äºDEBUGæ¨¡å¼é€‰æ‹©ä¸¤ç§è½»å¾®çš„å˜é‡ã€‚ æ‚¨æ€»æ˜¯å¯ä»¥é€‰æ‹©é€šè¿‡ä½¿ç”¨ä»¥ä¸‹æ–¹å¼åˆ é™¤é¢œè‰²ï¼š

```python
app.config.NO_COLOR = True
```

é¢œè‰²å°†è‡ªåŠ¨ä»TTY ç»ˆç«¯ä¸­åˆ é™¤æ—¥å¿—ã€‚

Sanic å°†ä½¿ç”¨ `sanic.logging.formatter.AutoFormatter` å’Œ `sanic.logging.formatter.AutoAccessFormatter` è‡ªåŠ¨åˆ‡æ¢DEBUG å’Œ PROD æ ¼å¼æ ¼å¼ã€‚ å½“ç„¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é€‚å½“å‘½åçš„æ ¼å¼å¼ºåˆ¶ä¸€ä¸ªæˆ–å¦ä¸€ä¸ªç‰ˆæœ¬

#### åœ¨ DEBUG æ¨¡å¼

```python
sanic.logging.formatter.DebugFormatter
sanic.logging.formatter.DebugAccessFormatter
```

![](/assets/images/logging-dev.png)

#### åœ¨PRODæ¨¡å¼

```python
sanic.logging.formatter.ProdFormatter
sanic.logging.formatter.ProdAccessFormatter
```

![](/assets/images/logging-prod.png)

#### é—ç•™é—®é¢˜

å¦‚æœä½ å–œæ¬¢æ—§å¼çš„ä¼æœ¨ï¼Œå®ƒä»¬å°†ä½œä¸ºæ—¥å¿—æ ¼å¼ä¿å­˜ç»™ä½ ï¼š`sanic.logging.formter.LegacyFormatter`å’Œ`sanic.logging.formter.LegacessFormatter`ã€‚

å®ç°è¿™äº›æ ¼å¼åŒ–çš„ä¸€ç§æ–¹å¼ï¼š

```python
from sanic.log import LOGGING_CONFIG_DEFAULTS

LOGGING_CONFIG_DEFAULTS["formatters"] = {
    "generic": {
        "class": "sanic.logging.formatter.LegacyFormatter"
    },
    "access": {
        "class": "sanic.logging.formatter.LegacyAccessFormatter"
    },
}
```

#### æ–° JSON æ ¼å¼åŒ–å™¨

è¿˜æœ‰ä¸€ä¸ªæ–°çš„ JSON æ—¥å¿—æ ¼å¼åŒ–å™¨ï¼Œå®ƒå°†ä»¥JSON æ ¼å¼è¾“å‡ºæ—¥å¿—ä»¥ä¾¿ä¸å…¶ä»–ç¬¬ä¸‰éƒ¨åˆ†æ—¥å¿—å¹³å°åˆå¹¶ã€‚

```python
from sanic.log import LOGGING_CONFIG_DEFAULTS

LOGGING_CONFIG_DEFAULTS["formatters"] = {
    "generic": {
        "class": "sanic.logging.formatter.JSONFormatter"
    },
    "access": {
        "class": "sanic.logging.formatter.JSONAccessFormatter"
    },
}
```

### åœ¨ unix å¥—æ¥å­—ä¸­ä½¿ç”¨è·¯å¾„

å½“ä¸ºæ‚¨çš„æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªunix å¥—æ¥å­—æ—¶ï¼Œæ‚¨ç°åœ¨å¯ä»¥é€šè¿‡é€šè¿‡ `pathlib.Path` å¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªåŸºäºå­—ç¬¦ä¸²çš„è·¯å¾„æ¥æ‰§è¡Œå®ƒã€‚

### è‡ªå®šä¹‰è·¯ç”±åç§°

æ‚¨å¯ä»¥åœ¨è‡ªå®šä¹‰ `Sanic` æˆ– `Blueprint` ä¸Šè¦†ç›–`generate_name` æ–¹æ³•ã€‚ è¿™å°†å…è®¸æ‚¨éšæ„ä¿®æ”¹è·¯ç”±åç§°ã€‚

```python
from sanic import Sanic, text,

class Custom(Sanic):
    def generate_name(self, *objects):
        existing = self._generate_name(*objects)
        return existing.upper()
        
app = Sanic("Foo")

@app.get("/")
async def handler(request):
    return text(request.name)  # FOO.HANDLER

    
return app
```

### ğŸš¨ Breaking æ›´æ”¹

1. `Request.cookies.getlist` æ€»æ˜¯è¿”å› `list` ã€‚ è¿™æ„å‘³ç€ï¼Œå¦‚æœæ²¡æœ‰ `key` çš„ cookie æ—¶ï¼Œå®ƒå°†æ˜¯ç©ºçš„ `list` è€Œä¸æ˜¯ `None'ã€‚ ä½¿ç”¨ `Request.cookies.getlist("something", None)\` æ¥ä¿ç•™ç°æœ‰çš„è¡Œä¸ºã€‚

## è°¢è°¢ä½ 

Thank you to everyone that participated in this release: :clap:

[@ahopkins](https://github.com/ahopkins)
[@ashleysommer](https://github.com/ashleysommer)
[@ChihweiLHBird](https://github.com/ChihweiLHBird)
[@DeJayDev](https://github.com/DeJayDev)
[@ekzhang](https://github.com/ekzhang)
[@Huy-Ngo](https://github.com/Huy-Ngo)
[@iAndriy](https://github.com/iAndriy)
[@jakkaz](https://github.com/jakkaz)
[@Nano112](https://github.com/Nano112)
[@prryplatypus](https://github.com/prryplatypus)
[@razodactyl](https://github.com/razodactyl)
[@Tronic](https://github.com/Tronic)
[@wieczorek1990](https://github.com/wieczorek1990)

---

å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œè¯·è€ƒè™‘ææ¬¾ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å–œæ¬¢ä»£ç è´¡çŒ®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå–œæ¬¢ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚ è€ƒè™‘æ’°å†™ä¸€äº›æ–‡æ¡£ï¼Œæ˜¾ç¤ºå…³é—­çš„æƒ…å†µï¼ŒåŠ å…¥å¯¹è¯å¹¶è®©æ‚¨çš„å£°éŸ³ä¸ºäººæ‰€çŸ¥ï¼Œå¦‚æœæ‚¨èƒ½å¤Ÿï¼š[é‡‘èè´¡çŒ®](https://opencollective.com/sanic-org/)ã€‚
