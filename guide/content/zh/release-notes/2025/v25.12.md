---
title: 版本25.12 (LTS)
---

# 版本25.12 (LTS)

.. toc::

## 一. 导言

版本25.12 是 **长期支持 (LTS)** 版本25[发行周期](../../organization/policies.md#release-schedule)。 LTS 发布后，它将在较长时间内收到安全更新和关键的错误修复。 如果您遇到任何问题，请对 [GitHub](https://github.com/sanic-org/sanic/issues/new/choose)提出关切。

## 了解什么

更多详细信息在 [Changelog](../changelog.html)。 显著的新功能或破损功能以及升级内容：

### Python 3.9 已移除，Python 3.14 已添加

Sanic 现在需要 **Python 3.1或更新**。 Python 3.9已被放弃，Python 3.14支持已被添加。

### 守护进程模式

您现在可以直接从 CLI 运行 Sanic 作为后台守护进程。

```sh
sanic path.to.app -D
sanic path.to.app --daemon
```

这还引入了管理守护进程的便利命令：

```sh
sanic path.to.app status    # Check if running
sanic path.to.app stop      # Stop the daemon
```

其他选项可用：

```sh
--pidfile PATH    # Custom PID file location
--logfile PATH    # Log output to file
--user USER       # Run as specified user
--group GROUP     # Run as specified group
```

下级命令也可用：

```sh
sanic kill --pid=<PID>
sanic kill --pidfile=<PATH>
sanic status --pid=<PID>
sanic status --pidfile=<PATH>
```

### 静态文件的符号链接控制

Sanic 现在提供了静态文件对符号链接的颗粒控制，有两个新的参数：

| 参数                              | 默认设置    | 描述                   |
| ------------------------------- | ------- | -------------------- |
| `follow_external_symlink_files` | `False` | 允许在静态根之外服务文件符号链接     |
| `follow_external_symlink_dirs`  | `False` | 允许从静态根以外的目录符号链接中服务文件 |

**示例**

安全默认值(阻止外部符号链接)：

```python
# Symlinks pointing outside /var/www/static will return 404
app.static("/static", "/var/www/static")
```

仅允许文件符号链接：

```python
# Serves /var/www/static/config.json -> /etc/app/config.json
app.static("/static", "/var/www/static", follow_external_symlink_files=True)
```

仅允许目录符号链接：

```python
# Serves files from /var/www/static/images/ -> /shared/images/
app.static("/static", "/var/www/static", follow_external_symlink_dirs=True)
```

### 自定义配置转换器

您现在可以将 Sanic 如何解析环境变量扩展到配置值。 默认情况下，Sanic 使用 `str`, `str_to_bool`, `float`, 和 `int` 转换器转换环境变量(尝试倒序)。 您可以添加自己的转换器来处理自定义类型。

**简单转换器** - 需要字符串并返回转换值的可调用值：

```python
class UltimateAnswer:
    def __init__(self, answer):
        self.answer = int(answer)

config = Config(converters=[UltimateAnswer])
app = Sanic("MyApp", config=config)

# Or register after creation
app.config.register_type(UltimateAnswer)
```

**详细转换器** - 需要更多上下文的转换器(全称、配置密钥、值和默认值)：

```python
from sanic.config import Config, DetailedConverter

class TypeAwareConverter(DetailedConverter):
    def __call__(self, full_key: str, config_key: str, value: str, defaults: dict):
        if config_key in defaults:
            # Cast to the same type as the default value
            return type(defaults[config_key])(value)
        raise ValueError  # Fall through to next converter

config = Config(
    defaults={"PORT": 8000, "DEBUG": False},
    converters=[TypeAwareConverter()]
)
```

### 文本内容类型自动字符集

文本内容类型 (`text/*`) 现在在静态文件和文件响应时自动包含 `charset=UTF-8` 。

### 创建任务返回任务

当通过 `app.add_task()`创建任务时，正西ncio `Task` 对象已返回，允许您稍后等待或检查其结果。

```python
task = app.add_task(some_coroutine())
# Later...
result = await task
```

### 改进的 CLI 错误消息

Trackerite 已升级到 v2.2.0，提供了更好格式的异常追踪在 CLI 中使用改进的链式异常显示。

## 谢谢你

Thank you to everyone that participated in this release: :clap:

[@ahopkins](https://github.com/ahopkins)
[@amarquard089](https://github.com/amarquard089)
[@ChihweiLHBird](https://github.com/ChihweiLHBird)
[@dhensen](https://github.com/dhensen)
[@dungarpan](https://github.com/dungarpan)
[@gazpachoking](https://github.com/gazpachoking)
[@helioascorreia](https://github.com/helioascorreia)
[@jameslovespancakes](https://github.com/jameslovespancakes)
[@Peopl3s](https://github.com/Peopl3s)
[@tdaron](https://github.com/tdaron)
[@tiejunhu](https://github.com/tiejunhu)
[@tkosman](https://github.com/tkosman)
[@Tronic](https://github.com/Tronic)
[@wojonet](https://github.com/wojonet)

---

如果您喜欢这个项目，请考虑捐款。 当然，我们喜欢代码贡献，但我们也喜欢任何形式的贡献。 考虑撰写一些文档，显示关闭的情况，加入对话并让您的声音为人所知，如果您能够：[财务贡献](https://opencollective.com/sanic-org/)。
